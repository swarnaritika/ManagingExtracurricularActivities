<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - KLU Extracurricular Activities</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .admin-container {
            padding: 40px 5%;
            min-height: calc(100vh - 300px);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .admin-login {
            max-width: 500px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .admin-dashboard {
            display: none;
        }
        
        .admin-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .admin-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        
        .admin-tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .event-list {
            margin-top: 20px;
        }
        
        .event-item {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .event-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-edit, .btn-delete {
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        .btn-edit {
            background: var(--secondary-color);
            color: white;
        }
        
        .btn-delete {
            background: #e53e3e;
            color: white;
        }
        
        .add-event-form {
            background: white;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">
            <img src="public\images\KLU LOGO.webp" alt="KLU Logo">
            <h1>KL University</h1>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#activities">Activities</a></li>
                <li><a href="index.html#events">Events</a></li>
                <li><a href="index.html#about">About</a></li>
                <li><a href="admin.html" class="active login-btn">Admin</a></li>
            </ul>
        </nav>
        <div class="menu-toggle">
            <i class="fas fa-bars"></i>
        </div>
    </header>

    <section class="admin-container">
        <div class="admin-login" id="adminLogin">
            <h2>Admin Login</h2>
            <p>Please login to access the admin dashboard.</p>
            <form id="adminLoginForm">
                <div class="form-group">
                    <label for="adminEmail">Email</label>
                    <input type="email" id="adminEmail" placeholder="Enter admin email" required>
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter password" required>
                </div>
                <button type="submit" class="auth-btn">Login</button>
            </form>
        </div>

        <div class="admin-dashboard" id="adminDashboard">
            <div class="admin-header">
                <h2>Admin Dashboard</h2>
                <button id="logoutBtn" class="auth-btn" style="width: auto; padding: 8px 15px;">Logout</button>
            </div>
            
            <div class="admin-tabs">
                <div class="admin-tab active" data-tab="manageEvents">Manage Events</div>
                <div class="admin-tab" data-tab="addEvent">Add New Event</div>
                <div class="admin-tab" data-tab="registrations">View Registrations</div>
            </div>
            
            <div class="tab-content active" id="manageEvents">
                <h3>Manage Events</h3>
                <div class="form-group">
                    <label for="filterCategory">Filter by Category</label>
                    <select id="filterCategory">
                        <option value="all">All Categories</option>
                        <option value="coding">Coding Club</option>
                        <option value="sports">Sports Teams</option>
                        <option value="music">Music Club</option>
                        <option value="art">Art & Design</option>
                    </select>
                </div>
                
                <div class="event-list" id="eventList">
                    <!-- Events will be loaded here -->
                </div>
            </div>
            
            <div class="tab-content" id="addEvent">
                <h3>Add New Event</h3>
                <form id="addEventForm" class="add-event-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventTitle">Event Title</label>
                            <input type="text" id="eventTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="eventCategory">Category</label>
                            <select id="eventCategory" required>
                                <option value="" disabled selected>Select category</option>
                                <option value="coding">Coding Club</option>
                                <option value="sports">Sports Teams</option>
                                <option value="music">Music Club</option>
                                <option value="art">Art & Design</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventDate">Date</label>
                            <input type="date" id="eventDate" required>
                        </div>
                        <div class="form-group">
                            <label for="eventTime">Time</label>
                            <input type="text" id="eventTime" placeholder="e.g. 2:00 PM - 5:00 PM" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="eventLocation">Location</label>
                            <input type="text" id="eventLocation" required>
                        </div>
                        <div class="form-group">
                            <label for="eventSeats">Available Seats</label>
                            <input type="number" id="eventSeats" min="1" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="eventDescription">Description</label>
                        <textarea id="eventDescription" rows="4" required></textarea>
                    </div>
                    
                    <button type="submit" class="auth-btn">Add Event</button>
                </form>
            </div>
            
            <div class="tab-content" id="registrations">
                <h3>Student Registrations</h3>
                <p>View and manage student registrations for events.</p>
                <!-- This would be populated with actual registration data in a real application -->
                <div class="event-list">
                    <div class="event-item">
                        <div>
                            <strong>Hackathon 2023</strong>
                            <p>32 students registered</p>
                        </div>
                        <button class="btn-edit">View Details</button>
                    </div>
                    <div class="event-item">
                        <div>
                            <strong>Web Development Workshop</strong>
                            <p>18 students registered</p>
                        </div>
                        <button class="btn-edit">View Details</button>
                    </div>
                    <div class="event-item">
                        <div>
                            <strong>Classical Music Night</strong>
                            <p>120 students registered</p>
                        </div>
                        <button class="btn-edit">View Details</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <div class="footer-logo">
                <img src="KLU LOGO.webp" alt="KLU Logo">
                <h3>KL University</h3>
            </div>
            <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="index.html#activities">Activities</a></li>
                    <li><a href="index.html#events">Events</a></li>
                    <li><a href="index.html#about">About</a></li>
                    <li><a href="login.html">Login/Register</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h3>Contact Us</h3>
                <p><i class="fas fa-map-marker-alt"></i> KL University, Vaddeswaram, Guntur District, Andhra Pradesh, India - 522302</p>
                <p><i class="fas fa-phone"></i> +91 866 2577715</p>
                <p><i class="fas fa-envelope"></i> info@kluniversity.in</p>
            </div>
            <div class="footer-social">
                <h3>Follow Us</h3>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2023 KL University. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const menuToggle = document.querySelector('.menu-toggle');
            const nav = document.querySelector('nav');
            
            if (menuToggle) {
                menuToggle.addEventListener('click', function() {
                    nav.classList.toggle('active');
                    
                    const icon = menuToggle.querySelector('i');
                    if (nav.classList.contains('active')) {
                        icon.classList.remove('fa-bars');
                        icon.classList.add('fa-times');
                    } else {
                        icon.classList.remove('fa-times');
                        icon.classList.add('fa-bars');
                    }
                });
            }
            
            // Admin login form
            const adminLoginForm = document.getElementById('adminLoginForm');
            const adminLogin = document.getElementById('adminLogin');
            const adminDashboard = document.getElementById('adminDashboard');
            
            // Check if admin is already logged in
            if (localStorage.getItem('adminToken')) {
                adminLogin.style.display = 'none';
                adminDashboard.style.display = 'block';
                loadEvents();
            }
            
            if (adminLoginForm) {
                adminLoginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('adminEmail').value;
                    const password = document.getElementById('adminPassword').value;
                    
                    // In a real app, you would make an API call to verify credentials
                    // For demo purposes, use admin@kluniversity.in and password: admin123
                    if (email === 'admin@kluniversity.in' && password === 'admin123') {
                        localStorage.setItem('adminToken', 'demo-token-12345');
                        adminLogin.style.display = 'none';
                        adminDashboard.style.display = 'block';
                        loadEvents();
                    } else {
                        alert('Invalid credentials. Please try again.');
                    }
                });
            }
            
            // Logout button
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', function() {
                    localStorage.removeItem('adminToken');
                    adminDashboard.style.display = 'none';
                    adminLogin.style.display = 'block';
                });
            }
            
            // Tab switching
            const tabs = document.querySelectorAll('.admin-tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Hide all tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Show the corresponding tab content
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Filter events by category
            const filterCategory = document.getElementById('filterCategory');
            if (filterCategory) {
                filterCategory.addEventListener('change', function() {
                    loadEvents(this.value);
                });
            }
            
            // Add event form
            const addEventForm = document.getElementById('addEventForm');
            if (addEventForm) {
                addEventForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const newEvent = {
                        title: document.getElementById('eventTitle').value,
                        category: document.getElementById('eventCategory').value,
                        date: document.getElementById('eventDate').value,
                        time: document.getElementById('eventTime').value,
                        location: document.getElementById('eventLocation').value,
                        seats: document.getElementById('eventSeats').value,
                        description: document.getElementById('eventDescription').value,
                        registered: 0
                    };
                    
                    // In a real app, you would make an API call to save the event
                    alert('Event added successfully!');
                    addEventForm.reset();
                    
                    // Switch to the manage events tab
                    document.querySelector('[data-tab="manageEvents"]').click();
                    loadEvents();
                });
            }
            
            // Function to load events
            function loadEvents(category = 'all') {
                const eventList = document.getElementById('eventList');
                if (!eventList) return;
                
                // Clear current events
                eventList.innerHTML = '';
                
                // In a real app, you would fetch events from an API
                // For demo purposes, we'll use sample data
                const events = {
                    "coding": [
                        { id: 1, title: "Hackathon 2023", date: "2023-09-15", registered: 32 },
                        { id: 2, title: "Web Development Workshop", date: "2023-09-22", registered: 18 },
                        { id: 3, title: "Competitive Programming Contest", date: "2023-10-05", registered: 45 }
                    ],
                    "sports": [
                        { id: 4, title: "Inter-Department Cricket Tournament", date: "2023-09-18", registered: 66 },
                        { id: 5, title: "Basketball Training Camp", date: "2023-09-25", registered: 12 }
                    ],
                    "music": [
                        { id: 6, title: "Classical Music Night", date: "2023-09-20", registered: 120 },
                        { id: 7, title: "Band Practice Session", date: "2023-09-27", registered: 10 }
                    ],
                    "art": [
                        { id: 8, title: "Art Exhibition", date: "2023-09-30", registered: 85 },
                        { id: 9, title: "Photography Workshop", date: "2023-10-02", registered: 18 }
                    ]
                };
                
                // Filter events by category
                let filteredEvents = [];
                if (category === 'all') {
                    Object.values(events).forEach(categoryEvents => {
                        filteredEvents = filteredEvents.concat(categoryEvents);
                    });
                } else if (events[category]) {
                    filteredEvents = events[category];
                }
                
                // Display events
                filteredEvents.forEach(event => {
                    const eventItem = document.createElement('div');
                    eventItem.className = 'event-item';
                    eventItem.innerHTML = `
                        <div>
                            <strong>${event.title}</strong>
                            <p>Date: ${event.date} | ${event.registered} students registered</p>
                        </div>
                        <div class="event-actions">
                            <button class="btn-edit" data-id="${event.id}">Edit</button>
                            <button class="btn-delete" data-id="${event.id}">Delete</button>
                        </div>
                    `;
                    eventList.appendChild(eventItem);
                });
                
                // Add event listeners for edit and delete buttons
                document.querySelectorAll('.btn-edit').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const eventId = this.getAttribute('data-id');
                        alert(`Edit event with ID: ${eventId}`);
                        // In a real app, you would open an edit form with the event details
                    });
                });
                
                document.querySelectorAll('.btn-delete').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const eventId = this.getAttribute('data-id');
                        if (confirm('Are you sure you want to delete this event?')) {
                            alert(`Event with ID: ${eventId} deleted`);
                            // In a real app, you would make an API call to delete the event
                            this.closest('.event-item').remove();
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>